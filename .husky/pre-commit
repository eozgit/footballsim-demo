echo "\nüîç \033[1m[1/4] ANALYZING ARCHITECTURE\033[0m"
echo "   ‚Ü≥ Checking for circular dependencies..."
npm run check:circ || { echo "‚ùå \033[31mDEATH SPIRAL DETECTED: Circular dependencies found!\033[0m"; exit 1; }

echo "\nüõ°Ô∏è  \033[1m[2/4] VALIDATING TYPES\033[0m"
echo "   ‚Ü≥ Compiling TypeScript..."
npm run type-check || { echo "‚ùå \033[31mTYPE SHIFT DETECTED: Compilation failed!\033[0m"; exit 1; }

echo "\nüß™ \033[1m[3/4] RUNNING ENGINE TESTS\033[0m"
echo "   ‚Ü≥ Executing Vitest suite..."
npm run test:run || { echo "‚ùå \033[31mENGINE STALL: Tests failed!\033[0m"; exit 1; }

echo "\nüßπ \033[1m[4/4] POLISHING SOURCE\033[0m"
echo "   ‚Ü≥ Linting staged files..."
npx lint-staged || { echo "‚ùå \033[31mSTAIN DETECTED: Linting issues found!\033[0m"; exit 1; }

echo "\n‚úÖ \033[32m\033[1mSYSTEM READY: Commit Authorized.\033[0m\n"
